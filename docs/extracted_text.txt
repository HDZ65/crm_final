 
 Cahier des charges â€” Module Catalogue Produits &amp; Partenaires Contexte Module central du CRM Winvest Capital permettant de rÃ©fÃ©rencer, normaliser et distribuer lâ€™ensemble des produits (internes et partenaires) pour toutes les sociÃ©tÃ©s du groupe . Il alimente les modules Vente, Contrats, ADV/ContrÃ´le QualitÃ©, Logistique, Dunning , Facturation/Compta et Pilotage. 1. Objectifs fonctionnels RÃ©fÃ©rentiel unique des produits, familles/risques et compagnies/partenaires, multi sociÃ©tÃ©s (FT, AP, MTV, USGP, etc.) et multi marques . Gestion produits internes (avec CA, prix, taxes) et produits partenaires (avec commissions et rÃ¨gles de partage de revenus). Support des modÃ¨les tarifaires : fixe, palier/Ã©chelonnÃ©, rÃ©current (mensuel/annuel), usage (consommation), bundle/pack, remise promo, prix nÃ©gociÃ©, indexÃ© (ex : Ã©nergie). Versionning produit + cycle de vie (Brouillon â†’ Test â†’ Actif â†’ GelÃ© â†’ RetirÃ©) avec effets datÃ©s . Documents produits : DIPA, CG/CP, FIP, grilles tarifaires, fiches techniques, notices, scripts de vente, mÃ©dias. IntÃ©grations partenaires (ex. OggoData / APIMarket des assureurs) : consultation tarifaire automatique, synchronisation des fiches, webhooks statutaires. Droits &amp; pÃ©rimÃ¨tres par sociÃ©tÃ© et par rÃ´le (lecture, crÃ©ation, publication, tarification, mapping compta, commissions). Normalisation codes produits , statuts , unitÃ©s , taux de TVA , comptes comptables et exports . Audit &amp; traÃ§abilitÃ© (qui change quoi/quand), conformitÃ© (CGV/consentements/archivage). 2. PÃ©rimÃ¨tre donnÃ©es (modÃ¨le conceptuel) 2.1 EntitÃ©s principales SociÃ©tÃ© ( Company ) ID, Raison sociale, SIREN/SIRET, TVA, logo/charte, devise de tenue de compte, paramÃ¨tres fiscaux/comptables (journaux, comptes, ICS si utile), statuts, adresses, contacts. Partenaire / Compagnie ( Insurer /Provider) ID, Type (Assureur, FAI, Ã‰nergie, OTT, Marketplaceâ€¦), SIREN, adresses, IBAN/RIB, codes extranet , API credentials , SLA, statut dâ€™activation par sociÃ©tÃ©. Risque / Famille Taxonomie (ex : SantÃ©, ObseÌ€ques , OTT/TV, Ã‰nergie, TÃ©lÃ©com, Service dâ€™assistanceâ€¦), icÃ´ne, contraintes, champs spÃ©cifiques. Produit Code produit (SKU), Nom marketing, SociÃ©tÃ© dÃ©tentrice, Partenaire associÃ© (optionnel), Risque, Type de monÃ©tisation (CA interne / Commission / Mixte), ModÃ¨le tarifaire , Taxes, RÃ©currence, Canaux autorisÃ©s (Terrain, TÃ©lÃ©vente, Web, Partenaires), PÃ©rimÃ¨tre gÃ©ographique, Conditions dâ€™Ã©ligibilitÃ© (Ã¢ge, zone, statut pro/part.), documents, mappages comptables , mappages ADV/CQ , statuts , versions . Formule / Plan tarifaire Variante dâ€™un produit : nom, code, paramÃ¨tres, grille de tarification (palier, indexation), options, surcharges, remises, dates dâ€™effet . Commission Scheme Par produit x partenaire x sociÃ©tÃ© x canal x pÃ©riode : %/montant, paliers , dÃ©gressivitÃ© , 1Ã¨re/renouvellement, upfront /rÃ©current, prÃ©comptÃ©/post-comptÃ©, minimum/maximum, account splitting (ex: VRP/Manager/Entreprise), rÃ©trocommissions. Document produit Type (DIPA, CG, fiche tarif, script, imageâ€¦), version, horodatage, signature lÃ©gale (hash), publication. Catalogue Publication Association produit â†” sociÃ©tÃ©s â†” canaux avec conditions, disponibilitÃ©, visibilitÃ© prix. 2.2 RÃ©fÃ©rentiels &amp; listes normalisÃ©es Statuts produits : Brouillon, En test ( sandbox ), Actif, GelÃ© (vente bloquÃ©e), RetirÃ© (support arrÃªtÃ©). Statuts intÃ©gration : Non intÃ©grÃ© / Demande en cours / IntÃ©grÃ© API / IntÃ©grÃ© via import / Inactif. Types de tarification : Fixe, RÃ©current, Usage, IndexÃ©, Palier, Bundle. Natures comptables : CA (701xx/706xx), Commissions (709xx/756xx selon), Frais (628xx), Taxes/Tva . 3. FonctionnalitÃ©s dÃ©taillÃ©es 3.1 CrÃ©ation &amp; Ã©dition produit Wizard en 5 Ã©tapes : GÃ©nÃ©ral (identitÃ©, sociÃ©tÃ©(s), risque, canal, P&amp;L type) Tarification (modÃ¨le, grilles, taxes, rÃ©currence, options) Commissions (schÃ©mas multi niveaux, pÃ©riodes 1Ã¨re/renouvellement, paliers) Documents (DIPA, CG, fiches) + obligations lÃ©gales par canal Publication &amp; mapping (compta, ADV/CQ, logistique, export). Versionning : duplication, comparaison (diff), planification de mise en production ( date dâ€™effet ), rollback. ContrÃ´les : unicitÃ© codes, cohÃ©rence TVA, prÃ©sence DIPA/CG si canal Web, verrouillages si produit diffusÃ©. 3.2 IntÃ©gration partenaires (ex. OggoData ) Connecteurs API (OAuth/API key) : Catalogue pull/push (produits, formules, libellÃ©s, mode tarifaire automatique ) Tarification temps rÃ©el durant la vente ( quote / price ) Webhooks : crÃ©ation contrat, statut souscription, annulation, renouvellement, rÃ©trocession commission. Sandbox &amp; Production avec clÃ©s distinctes, journal dâ€™appels (latence, succÃ¨s/erreurs), retry avec back off, alerting (Slack/Email) en cas dâ€™Ã©chec. Mapper produit partenaire** : codes externes, conversion dâ€™unitÃ©s, rÃ¨gles de fallback (manuel si API KO). 3.3 RÃ¨gles de commission &amp; revenus Modes : Commission seulement (produit partenaire â€” ex : mutuelle via courtier) CA interne (produit maison â€” ex : France TÃ©lÃ©phone, Mondial TV, Depanssur) Mixte (CA + commission sur upsell /affiliation). ParamÃ¨tres : paliers (tranches volume/chiffre), paliers temporels (M1 M3, puis standard), primes (one shot), malus (rÃ©siliation anticipÃ©e), clawback . RÃ©partition : Entreprise / Commercial / Manager / Partenaire / Plateforme selon plans par sociÃ©tÃ©. Ã‰chÃ©ancier : dÃ©clenchement (Ã la vente, Ã lâ€™encaissement, au renouvellement, au 15 du mois suivantâ€¦). Simulateur intÃ©grÃ© (test dâ€™une opportunitÃ©) + prÃ©visualisation comptable (Ã©critures prÃ©vues). 3.4 Publication &amp; diffusion Activation par sociÃ©tÃ© et par canal (terrain, tÃ©lÃ©vente, web, marketplace). Filtres catalogue : sociÃ©tÃ©, risque, compagnie, intÃ©grÃ© ?, actif ?, diffusÃ© ?, mode tarif. ContrÃ´les qualitÃ© avant publication (checklist : CG/DIPA, mapping compta, grilles remplies, commissions). Badges : Nouveau , Promo , BÃªta , Sur devis . 3.5 Documents &amp; conformitÃ© DÃ©pÃ´t PDF /assets avec types (DIPA, CG, CP, FAQ, script, visuels). Archivage versionnÃ©, horodatage, hash, preuve dâ€™intÃ©gritÃ© . Exposition contextuelle aux commerciaux (fiche produit), Ã lâ€™ADV (DIPA/CG auto jointes aux contrats), et au client (portail). 3.6 Mappings transverses ComptabilitÃ© : comptes produits/charges, journaux, TVA , centre de coÃ»ts par sociÃ©tÃ©, export CSV/Excel et API vers le cabinet. ADV/ContrÃ´le QualitÃ© : champs obligatoires, jeux de rÃ¨gles, scripts dâ€™appels spÃ©cifiques, piÃ¨ces justificatives requises (CNI, RIBâ€¦). Logistique : besoins de livraison, stocks, gÃ©nÃ©rateurs de tickets. Dunning /Facturation : gabarits de factures/mandats, cycles de prÃ©lÃ¨vements (SEPA/CB), frais initiaux. 3.7 Recherche &amp; UX catalogue Vue 3 pans (Risque / Compagnies / Produits) + recherche full text et filtres. Fiche produit 360Â° : onglets Description , Tarification , Commissions , Documents , ParamÃ¨tres , Historique . Actions : CrÃ©er un risque , CrÃ©er une compagnie , CrÃ©er un produit , Dupliquer , Exporter (PDF/CSV), Tester API . 3.8 Gouvernance &amp; sÃ©curitÃ© RÃ´les : Admin Groupe : tout pÃ©rimÃ¨tre + gestion multi sociÃ©tÃ©s Admin SociÃ©tÃ© : produits de sa sociÃ©tÃ© Catalogue Manager : crÃ©ation/Ã©dition, pas de mapping comptable Compta : mapping/exports ADV : rÃ¨gles CQ/documents Vente : lecture + simulateur Audit : journal dÃ©taillÃ© (avant/aprÃ¨s), export CSV, piste dâ€™audit mensuelle. SÃ©curitÃ© : MFA pour connecteurs, secret rotation , chiffrage au repos (KMS), cloisonnement par sociÃ©tÃ©. 4. Flux &amp; processus Onboarding dâ€™un nouveau partenaire Check KYC, IBAN, contrats, credentials , mapping compta, crÃ©ation Compagnie , import catalogue (API/CSV), tests sandbox , publication pilote. CrÃ©ation dâ€™un nouveau produit Business case â†’ Wizard â†’ Validation RACI (Produit/Compta/ADV/IT) â†’ Publication planifiÃ©e. Changement de commission/promo Nouvelle Version (effet au 1er du mois), notification canaux, synchronisation scripts. Retrait produit Gel vente, notifications, plan de sortie (support/renouvellement), archivage. 5. API &amp; intÃ©grations (extraits) /api/catalog/partners (GET/POST) â€” CRUD compagnies &amp; credentials. /api/ catalog / products (GET/POST/PATCH) â€” CRUD produits + versions. /api/ catalog / pricing / quote (POST) â€” Tarification temps rÃ©el (passe plat vers OggoData /assureur). /api/ catalog / webhooks â€” rÃ©ception Ã©vÃ©nements ( quote , issuePolicy , cancel, renewal , commissionReport ). /api/ catalog /exports â€” grilles prix, mapping comptable, documents. Connecteurs standards : OggoData , Slimpay/ GoCardless /Emerchantpay (documents &amp; mandats), S3/SharePoint pour archivage, cabinet comptable (API/CSV), Ringover/ Cely (scripts de vente). 6. Exports &amp; reporting Exports comptables par sociÃ©tÃ© et par produit : CA/Commissions/TVA/lettrage, Ã©chÃ©anciers , bordereaux partenaires. Dashboards : nb produits actifs, taux dâ€™intÃ©gration API, latence quote , top CA/commissions, marge nette par produit/sociÃ©tÃ©, alertes documents expirants. 7. QualitÃ©, tests &amp; SLA Recette sandbox partenaires (tarification, souscription, annulation). Tests unitaires/intÃ©gration ( mocks API), tests de non rÃ©gression versionning , tests charge (50k produits/ quotes ). SLA internes : publication &lt; 24h aprÃ¨s validation, mise Ã jour statuts webhook &lt; 5 min, RPO â‰¤ 1h, RTO â‰¤ 4h. 8. SÃ©curitÃ© &amp; conformitÃ© RGPD : minimisation, DPA partenaires, registre traitements, conservation doc lÃ©gale 10 ans. ContrÃ´les : listes noires de produits/canaux, whitelisting IP pour webhooks , anti duplication (mÃªmes codes/ external IDs). 9. DÃ©ploiement &amp; migration Importer depuis existants (A3DN, OggoData , tableurs) : mapping CSV avec validateurs. Scripts de migration codes produits, rattachement documents, reconstitution versions. 10. DÃ©pendances &amp; interactions Vente/OpportunitÃ©s (sÃ©lection produit, simulateur, contrÃ´les dâ€™Ã©ligibilitÃ©) Contrats (crÃ©ation Ã partir de la fiche produit, documents automatiques) ADV/CQ (rÃ¨gles par produit, checklists) Logistique (si produit matÃ©riel) Marketing (catalogue web, promos) Compta (comptes/exports) Dunning /Facturation (rÃ©currence, ICS/mandats). 11. Livrables SpÃ©cification fonctionnelle dÃ©taillÃ©e + MCD/MER. Dictionnaire de donnÃ©es (JSON Schema ). SpÃ©cification API &amp; webhooks . Jeux de tests &amp; donnÃ©es seed . Gabarits dâ€™exports comptables (CSV/Excel) par sociÃ©tÃ©. Guides dâ€™ onboarding partenaires &amp; checklists publication produit. 12. Annexes (Ã produire / complÃ©ter) Annexe A â€” SchÃ©mas de donnÃ©es dÃ©taillÃ©s (tables, clÃ©s, cardinalitÃ©s, JSON Schemas ). Annexe B â€” Textes lÃ©gaux &amp; obligations documentaires par canal (DIPA, CG, mentions). Annexe C â€” Liste des statuts normalisÃ©s (produits, intÃ©grations, diffusion). Annexe D â€” Matrice RACI (Produit/Compta/ADV/IT/Marketing). Annexe E â€” SpÃ©cification UX des Ã©crans clÃ©s (Catalogue 3 pans, Fiche Produit 360Â°, Wizard , Simulateur). Annexe F â€” Mappings dâ€™export comptable (modÃ¨les CSV/Excel) par sociÃ©tÃ© . Annexe G â€” Plan de sÃ©curitÃ© &amp; audit (MFA, rotation secrets, journaux). Annexe H â€” Plan de tests &amp; monitoring (charge, sandbox, alerting webhooks). Annexe I â€” PRA/PCA &amp; continuitÃ© (RTO/RPO, sauvegardes, procÃ©dures). Annexe J â€” ProcÃ©dures dâ€™ onboarding partenaire (checklist + SLA). Annexe K â€” Plan de migration (A3DN/ OggoData /CSV). Annexe L â€” Glossaire &amp; taxonomie des risques . 13. Exemples concrets (prÃ© paramÃ©trages) Assistance Action PrÃ©voyance (Partenaire) : Type : Commission seule â€” Mode tarifaire Automatique (API OggoData ) Commission 1Ã¨re annÃ©e : 100% prÃ©comptÃ©e, Renouvellement : 100% Documents obligatoires : DIPA, CG Canaux : TÃ©lÃ©vente / Terrain Export : Bordereau partenaire mensuel + journal 756xx. Mondial TV â€” Offre TV (Interne) : Type : CA interne rÃ©current mensuel (9,90 â‚¬ / 19,90 â‚¬ / 29,90 â‚¬) Taxes : TVA 20% Commissions commerciales : paliers volume (0â€“99 â†’ 10%; 100â€“499 â†’ 12%; 500+ â†’ 15%). Depanssur 100 â‚¬ (Service) : One shot, CA interne, TVA 20%, document DIPA/CG, facture immÃ©diate. 14. Roadmap (extrait) V1 : RÃ©fÃ©rentiel + Wizard + Documents + Publication + Exports comptables basiques + Connecteur OggoData ( quote ). V1.1 : Webhooks partenaires + Simulateur commissions + Audit avancÃ©. V1.2 : Bundles, prix indexÃ©s Ã©nergie, promos planifiÃ©es, tableaux de bord. V2 : Marketplace interne (exposition publique catalogue), gestion multi devises optionnelle, A/B pricing . Notes Conserver la logique Annexes commune aux autres modules (ne rien supprimer). PrÃ©voir permissions fines pour Box/TV Ã‰nergie vs. Assurance afin dâ€™Ã©viter les erreurs de publication cross sociÃ©tÃ©s. Annexe A â€” SchÃ©mas de donnÃ©es dÃ©taillÃ©s Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest Cette annexe est indÃ©pendante et couvre : (1) le MCD/MER (entitÃ©s, clÃ©s, cardinalitÃ©s), (2) le modÃ¨le logique (tables &amp; contraintes), (3) des JSON Schemas dâ€™API, (4) des rÃ¨gles dâ€™intÃ©gritÃ© , (5) un mini dictionnaire de donnÃ©es , (6) des exemples dâ€™index/performances et (7) des jeux seed pour la recette. 1) ModÃ¨le conceptuel (MCD/MER) 1.1 EntitÃ©s &amp; relations (vue globale) Company (SociÃ©tÃ©) 1 â€”&lt; Partner (Compagnie/Partenaire) Company 1 â€”&lt; Risk (Taxonomie/Famille) Company 1 â€”&lt; Product (propriÃ©taire) Partner 1 â€”&lt; PartnerCredential ( Sandbox /Prod, historisÃ©) Risk 1 â€”&lt; Product Product 1 â€”&lt; ProductVersion (effet datÃ©) ProductVersion 1 â€”&lt; ProductPlan (Formules) ProductVersion 1 â€”&lt; PricingRule (Grilles tarifaires) ProductVersion 1 â€”&lt; CommissionScheme 1 â€”&lt; CommissionTier (Paliers) ProductVersion 1 â€”&lt; ProductDocument (DIPA/CG/â€¦) Product 1 â€”&lt; ExternalMapping (codes OggoData /assureurs) ProductVersion 1 â€”&lt; Publication (activation par sociÃ©tÃ© x canal) ProductVersion 1 â€”&lt; AccountingMapping (comptes/TVA par sociÃ©tÃ©) ProductVersion 1 â€”&lt; CqRule (exigences ADV/CQ) WebhookEndpoint 1 â€”&lt; WebhookEvent AuditLog (transversal) 1.2 CardinalitÃ©s clÃ©s Company (1) â€”&lt; Product (N) Partner (1) â€”&lt; Product (N) ( nullable ) Risk (1) â€”&lt; Product (N) Product (1) â€”&lt; ProductVersion (N) ProductVersion (1) â€”&lt; { ProductPlan , PricingRule , CommissionScheme , ProductDocument , Publication, AccountingMapping , CqRule } (N) CommissionScheme (1) â€”&lt; CommissionTier (N) 2) ModÃ¨le logique (tables &amp; contraintes) Types : UUID , VARCHAR(n) , TEXT , DECIMAL( p,s ) , INT , BOOL , JSONB , TIMESTAMPTZ (ciblage Postgres ). Les contraintes PK/FK/UK sont explicites ci dessous. 2.1 RÃ©fÃ©rentiels company id PK (UUID) legal_name VARCHAR(160) UK, brand_name VARCHAR(120) siren VARCHAR(9) UK, siret_default VARCHAR(14) NULL vat_number VARCHAR(32) NULL, currency CHAR(3) DEFAULT 'EUR' timezone VARCHAR(40) DEFAULT 'Europe/Paris' ics_code VARCHAR(20) NULL brand_theme JSONB NULL (couleurs, logos) is_active BOOL DEFAULT TRUE, created_at , updated_at partner id PK, company_id FKâ†’company.id (ON DELETE RESTRICT) type ENUM('insurer','energy','telecom',' ott ',' marketplace','other ') name VARCHAR(160) UK( company_id,name ), legal_name VARCHAR(160) siren VARCHAR(9) NULL, addresses JSONB NULL iban_masked VARCHAR(40) NULL, bic VARCHAR(20) NULL payment_terms VARCHAR(60) NULL status ENUM(' active','inactive','test ') DEFAULT 'active' partner_credential id PK, partner_id FKâ†’partner.id (ON DELETE CASCADE) env ENUM(' sandbox ','production'), UK( partner_id,env ) auth_type ENUM('api_key','oauth2','basic') credentials JSONB (chiffrÃ© au repos) valid_from , valid_to NULL, rotated_by UUID NULL risk id PK, company_id FKâ†’company.id code VARCHAR(60) UK( company_id,code ) label VARCHAR(120), icon VARCHAR(120) NULL scope ENUM(' personal ',' professional ') is_global BOOL DEFAULT FALSE 2.2 Catalogue product id PK company_id FKâ†’company.id (propriÃ©taire) partner_id FKâ†’partner.id NULL risk_id FKâ†’risk.id sku VARCHAR(80) UK global name VARCHAR(160), short_name VARCHAR(80) NULL revenue_model ENUM(' revenue','commission','mixed ') lifecycle_status ENUM('draft','test','active',' frozen ',' retired ') DEFAULT 'draft' created_by UUID, created_at , updated_at product_version id PK, product_id FKâ†’product.id version INT NOT NULL, UK( product_id,version ) effective_from TIMESTAMPTZ NOT NULL, effective_to TIMESTAMPTZ NULL notes TEXT NULL, breaking_changes BOOL DEFAULT FALSE CHECK no overlap des pÃ©riodes par product_id product_plan id PK, product_version_id FKâ†’product_version.id code VARCHAR(60) UK( product_version_id,code ) name VARCHAR(120) recurrence ENUM(' one_shot','monthly','yearly','custom ') billing_cycle_days INT NULL pricing_rule id PK product_version_id FKâ†’product_version.id plan_id FKâ†’product_plan.id NULL type ENUM(' fixed','tiered','indexed','usage ') currency CHAR(3) DEFAULT 'EUR' payload JSONB NOT NULL tax_rate DECIMAL(5,2) DEFAULT 20.00, tax_included BOOL DEFAULT TRUE commission_scheme id PK, product_version_id FKâ†’product_version.id plan_id FKâ†’product_plan.id NULL applies_to ENUM(' new','renewal','both ') DEFAULT 'both' settlement ENUM('upfront','recurring',' on_collection ') split JSONB NOT NULL (ex: {company:0.6, commercial:0.3, manager:0.1}) commission_tier id PK, scheme_id FKâ†’commission_scheme.id basis ENUM(' volume','revenue','margin','months ') min DECIMAL(18,4), max DECIMAL(18,4) NULL value_type ENUM(' percent','amount ') value DECIMAL(10,4) product_document id PK, product_version_id FKâ†’product_version.id type ENUM('DIPA','CG','CP','TARIF','SCRIPT','MEDIA') title VARCHAR(160), file_url TEXT, file_hash VARCHAR(96) mandatory BOOL DEFAULT FALSE, published_at TIMESTAMPTZ NULL external_mapping id PK, product_id FKâ†’product.id system VARCHAR(60) (ex.: ' OggoData ',' AssureurX ') external_code VARCHAR(120) UK( product_id,system ) publication id PK, product_version_id FKâ†’product_version.id company_id FKâ†’company.id (autorisÃ©e Ã vendre) channels JSONB (set: ['field',' telesales ',' web','partner ']) visibility ENUM(' hidden ',' internal ','public') DEFAULT ' internal ' start_at TIMESTAMPTZ, end_at TIMESTAMPTZ NULL accounting_mapping id PK, product_version_id FKâ†’product_version.id, company_id FKâ†’company.id nature ENUM(' revenue','commission','fee','tax ') gl_account VARCHAR(20), journal VARCHAR(20) NULL tax_code VARCHAR(10) NULL, cost_center VARCHAR(20) NULL UK( product_version_id,company_id,nature ) cq_rule id PK, product_version_id FKâ†’product_version.id required_fields JSONB (ex.: ['CNI','RIB',' JustifDomicile ']) call_script_id UUID NULL, notes TEXT NULL 2.3 IntÃ©grations &amp; audit webhook_endpoint id PK, partner_id FKâ†’partner.id event VARCHAR(60) (quote, issuePolicy , cancel, renewal, commissionReport ) target_url TEXT, secret TEXT (chiffrÃ©), status ENUM(' active','inactive ') webhook_event id PK, endpoint_id FKâ†’webhook_endpoint.id received_at , payload JSONB, signature VARCHAR(96), status ENUM(' ok','retry','failed ') attempts INT DEFAULT 0, last_error TEXT NULL audit_log id PK, table VARCHAR(60), record_id UUID, actor_id UUID action ENUM(' insert','update','delete '), before JSONB, after JSONB at TIMESTAMPTZ DEFAULT now () 3) JSON Schemas (API) 3.1 Product (POST / api /catalog/products) { "$schema": "https://json-schema.org/draft/2020-12/schema", "type": "object", "required": [" sku ","name","company_id","risk_id"," revenue_model "], "properties": { " sku ": {"type": "string", " maxLength ": 80}, "name": {"type": "string", " maxLength ": 160}, " short_name ": {"type": "string"}, " company_id ": {"type": "string", "format": " uuid "}, " partner_id ": {"type": [" string","null "], "format": " uuid "}, " risk_id ": {"type": "string", "format": " uuid "}, " revenue_model ": {" enum ": [" revenue","commission","mixed "]}, " lifecycle_status ": {" enum ": [" draft","test","active","frozen","retired "]} } } 3.2 ProductVersion (POST / api /catalog/products/{id}/versions) { "$schema": "https://json-schema.org/draft/2020-12/schema", "type": "object", "required": [" effective_from "], "properties": { " effective_from ": {"type": "string", "format": "date-time"}, " effective_to ": {"type": [" string","null "], "format": "date-time"}, "notes": {"type": "string"}, " breaking_changes ": {"type": " boolean "} } } 3.3 PricingRule (payload par type) { "$schema": "https://json-schema.org/draft/2020-12/schema", " oneOf ": [ {"type":"object","required":["amount"],"properties":{"amount":{"type":"number"}}}, {"type":"array","items":{"type":"object","required":["min","amount"],"properties":{"min":{"type":"number"},"max":{"type":["number","null"]},"amount":{"type":"number"},"base":{"type":["string","null"],"enum":[null,"percent","amount"]}}}}, {"type":"object","required":["index","formula"],"properties":{"index":{"enum":["spot","cpi","energy"]},"formula":{"type":"string"}}}, {"type":"object","required":["unit","unit_price"],"properties":{"unit":{"type":"string"},"unit_price":{"type":"number"},"min_charge":{"type":["number","null"]}}} ] } 3.4 CommissionScheme { "$ schema ": "https://json-schema.org/draft/2020-12/ schema ", "type": "object", "required": [" applies_to","settlement","split "], "properties": { " applies_to ": {" enum ": [" new","renewal","both "]}, "settlement": {" enum ": ["upfront","recurring"," on_collection "]}, "split": {"type": "object", " additionalProperties ": {"type": "number", "minimum": 0, "maximum": 1}}, "tiers": {"type": "array", "items": {"type": "object", "required": [" basis","min","value_type","value "], "properties": {"basis": {" enum ": [" volume","revenue","margin","months "]}, "min": {"type": "number"}, "max": {"type": [" number","null "]}, " value_type ": {" enum ": [" percent","amount "]}, "value": {"type": "number"}}}} } } 3.5 Publication { "$schema": "https://json-schema.org/draft/2020-12/schema", "type": "object", "required": ["company_id","product_version_id","channels"," start_at "], "properties": { " company_id ": {"type": "string", "format": " uuid "}, " product_version_id ": {"type": "string", "format": " uuid "}, "channels": {"type": "array", "items": {" enum ": ["field"," telesales "," web","partner "]}}, "visibility": {" enum ": [" hidden","internal","public "]}, " start_at ": {"type": "string", "format": "date-time"}, " end_at ": {"type": [" string","null "], "format": "date-time"} } } 4) RÃ¨gles dâ€™intÃ©gritÃ© &amp; validations UnicitÃ© : sku global, ( product_id,version ) , ( product_version_id,code ) pour plan, ( product_version_id,company_id,nature ) pour mappings comptables. Non chevauchement des pÃ©riodes effective_* dâ€™un mÃªme product_id . PrÃ©sence documentaire : Au moins un ProductDocument type in ('DIPA','CG') pour channels contenant web . Protection diffusion : si lifecycle_status ='active' et publication en cours, bloquer suppression ou exiger version majeure. Somme split Commission = 1.0 (Â± 1e 6). TVA conforme au pays ( company.currency &amp; rÃ¨gles fiscales). 5) Mini dictionnaire de donnÃ©es (extrait) sku : Code produit unique (format conseillÃ© : {SOCIETE}-{RISQUE}-{SEQ} ) revenue_model : revenue (CA interne), commission (rÃ©trocession), mixed (les deux). plan.recurrence : one_shot , monthly , yearly , custom ( jours via billing_cycle_days ). pricing_rule.type : fixed (montant), tiered (paliers), indexed (formule), usage (prix unitaire). publication.channels : canaux autorisÃ©s (terrain/tÃ©lÃ©vente/web/partenaire). 6) Index &amp; perfs (recommandations) product ( sku ) UK + btree sur ( company_id , risk_id , lifecycle_status ) product_version ( product_id , effective_from DESC) pricing_rule ( product_version_id , plan_id , type) publication ( company_id , start_at , end_at ) pour filtrage par sociÃ©tÃ© commission_tier ( scheme_id , min) pour recherche palier external_mapping (system, external_code ) pour jointures partenaires Partitionnement temporel suggÃ©rÃ© pour audit_log et webhook_event (par mois) 7) Jeux de donnÃ©es seed (exemple minimal) -- SociÃ©tÃ©s INSERT INTO company( id,legal_name,brand_name,siren ) VALUES ('11111111-1111-1111-1111-111111111111','France TÃ©lÃ©phone','France TÃ©lÃ©phone','800397291'), ('22222222-2222-2222-2222-222222222222','Action PrÃ©voyance','Action PrÃ©voyance','530895710'); -- Risques INSERT INTO risk( id,company_id,code,label,scope ) VALUES (' aaaa ...','1111...','OTT','Offre TV','personal '), (' bbbb ...','2222...',' SANTE','ComplÃ©mentaire SantÃ©',' personal '); -- Produit interne (MTV) INSERT INTO product(id,company_id,risk_id,sku,name,revenue_model,lifecycle_status) VALUES('p1...','1111...',' aaaa ...','MTV-OFFRE-001','Offre TV Essentiel','revenue','active '); -- Version &amp; plan INSERT INTO product_version ( id,product_id,version,effective_from ) VALUES('v1...','p1...',1,now()); INSERT INTO product_plan ( id,product_version_id,code,name,recurrence ) VALUES('pl1...','v1...','BASIC',' Essentiel ','monthly'); INSERT INTO pricing_rule(id,product_version_id,plan_id,type,currency,payload) VALUES('pr1...','v1...','pl1...','fixed','EUR','{"amount":9.90}'); Fin de lâ€™Annexe A Annexe B â€” Textes lÃ©gaux &amp; obligations documentaires Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest 1. Objectifs Garantir que chaque produit publiÃ© dans le CRM respecte les exigences lÃ©gales et rÃ©glementaires applicables (assurance, tÃ©lÃ©com, Ã©nergie, OTT, services). Centraliser les documents contractuels et mentions lÃ©gales dans le catalogue produit. PrÃ©venir la commercialisation dâ€™un produit sans que les documents obligatoires soient associÃ©s, versionnÃ©s et accessibles. 2. Typologie des documents obligatoires 2.1 Assurance / PrÃ©voyance / SantÃ© DIPA (Document dâ€™Information sur le Produit dâ€™Assurance) â€“ format standardisÃ©, obligatoire. Conditions GÃ©nÃ©rales (CG) â€“ encadrant droits/obligations des parties. Conditions ParticuliÃ¨res (CP) â€“ spÃ©cifiques au contrat/assurÃ©. Fiche dâ€™Information PrÃ©contractuelle (FIP) â€“ obligatoire pour certains produits santÃ©. Notice dâ€™Information â€“ en cas dâ€™assurance collective. Mentions L.215-1 Code de la consommation â€“ reconduction tacite, modalitÃ©s de rÃ©siliation. 2.2 TÃ©lÃ©com (France TÃ©lÃ©phone, Box, SIM) Conditions GÃ©nÃ©rales de Vente (CGV) â€“ spÃ©cifiques aux services tÃ©lÃ©com. Conditions ParticuliÃ¨res dâ€™Abonnement â€“ contrat dâ€™abonnement. Informations SEPA/mandats prÃ©lÃ¨vements â€“ mandat Ã signer (Slimpay, GoCardless , etc.). Charte de confidentialitÃ© / RGPD â€“ gestion des donnÃ©es personnelles (CNI, RIB, etc.). 2.3 Ã‰nergie (Ã‰lectricitÃ©, Gaz) Conditions StandardisÃ©es de Vente â€“ fourniture Ã©nergie (CRE/Code Ã‰nergie). Notice Tarifaire RÃ©glementÃ©e â€“ indexations, modalitÃ©s dâ€™Ã©volution des prix. Mentions Conso Ã‰nergie â€“ droits consommateurs, mÃ©diation Ã©nergie. 2.4 OTT / MÃ©dia (Mondial TV) Conditions GÃ©nÃ©rales dâ€™Utilisation (CGU) â€“ accÃ¨s plateforme OTT/IPTV. Conditions GÃ©nÃ©rales dâ€™Abonnement (CGA) â€“ souscription, renouvellement. Charte dâ€™Utilisation / Politique Contenus â€“ droits/licences, protection mineurs. 2.5 Services (Conciergerie, Assistance, DÃ©pannage) CGV / CP â€“ cadre contractuel. Notice de Service â€“ description prestations, exclusions, SLA. 3. RÃ¨gles dâ€™obligation documentaire par canal TÃ©lÃ©vente / Terrain : minimum CG + DIPA (assurance) ou CGV (tÃ©lÃ©com/OTT). Web / Digital : obligation dâ€™affichage prÃ©alable de DIPA/CG/CP avant validation de souscription (case Ã cocher Â« lu et acceptÃ© Â»). Partenariat/API : validation automatique que les documents obligatoires sont attachÃ©s et envoyÃ©s lors de la crÃ©ation du contrat. 4. Gestion documentaire dans le CRM Stockage versionnÃ© : chaque document rattachÃ© Ã un produit/version, avec hash SHA256. Types normalisÃ©s : DIPA, CG, CP, FIP, CGV, CGU, Notice, Script. MÃ©tadonnÃ©es : auteur, date version, date publication, canal applicable. Archivage lÃ©gal : 10 ans minimum (assurance, tÃ©lÃ©com, Ã©nergie). TraÃ§abilitÃ© : audit log (qui a publiÃ©, quelle version, quand). Alertes : notification si document expirant ou manquant lors de la publication. 5. Mentions &amp; obligations transverses Code de la consommation : art. L.215-1, reconduction tacite + information annuelle sur la rÃ©siliation. RGPD : consentement explicite, droit dâ€™accÃ¨s, conservation proportionnÃ©e. DGCCRF : conformitÃ© publicitÃ©/offre (pas dâ€™offre trompeuse, prix TTC affichÃ©s). Directive IDD (distribution dâ€™assurance) : obligation de remettre le DIPA avant souscription. Directive EuropÃ©enne Services NumÃ©riques (DSA) : transparence contenus (OTT, plateformes). 6. Processus de validation CrÃ©ation produit â†’ checklist documentaire . Workflow RACI : Produit (crÃ©ation) , Juriste (validation lÃ©gale) , ADV (mise en ligne) . Publication bloquÃ©e si documents obligatoires non prÃ©sents. 7. Exigences techniques Documents en PDF/A (archivage long terme). Signature Ã©lectronique ( Yousign ) possible pour CG/CP. VÃ©rification dâ€™intÃ©gritÃ© : hash stockÃ© en base. Export auto vers extranet partenaires (si exigÃ©). 8. Exemple mapping documentaire par produit Type produit Documents requis Canal DurÃ©e conservation Assurance SantÃ© DIPA + CG + CP Terrain, Web 10 ans TÃ©lÃ©com Box CGV + Mandat SEPA Web, Terrain 10 ans Ã‰nergie CGV Ã©nergie + Notice tarif Web 10 ans OTT (Mondial TV) CGU + CGA Web 10 ans Assistance/DÃ©pannage CGV + Notice service Tous 10 ans Annexe C â€” Liste des statuts normalisÃ©s Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest 1. Statuts Produits (cycle de vie) Brouillon : produit en crÃ©ation, non publiable, rÃ©servÃ© aux admins catalogue. Test : produit visible uniquement en sandbox /recette, non vendable. Actif : produit disponible Ã la vente (selon publications et canaux autorisÃ©s). GelÃ© : produit temporairement suspendu (pas de nouvelles ventes, mais contrats existants maintenus). RetirÃ© : produit retirÃ© dÃ©finitivement du catalogue (support uniquement sur les contrats en cours). 2. Statuts IntÃ©gration API Partenaire Non intÃ©grÃ© : produit dÃ©clarÃ© mais pas encore liÃ© Ã un flux partenaire. Demande en cours : demande envoyÃ©e au partenaire (ex. OggoData ) pour activation. IntÃ©grÃ© API : produit branchÃ© sur une API active (tarification/souscription temps rÃ©el). IntÃ©grÃ© Import : produit alimentÃ© par import manuel/CSV (sans API). Inactif : produit inactif cÃ´tÃ© partenaire (API dÃ©sactivÃ©e ou contrat terminÃ©). 3. Statuts Diffusion (publication catalogue) CachÃ© : produit prÃ©sent mais invisible pour les commerciaux. Interne : visible dans le CRM interne mais pas sur les portails clients. Public : visible et sÃ©lectionnable via tous les canaux autorisÃ©s (web, terrain, tÃ©lÃ©vente). 4. Statuts Commission PrÃ©comptÃ©e : commission retenue directement par le partenaire et reversÃ©e nette. Post-comptÃ©e : commission calculÃ©e aprÃ¨s encaissement. Clawback : commission Ã restituer en cas de rÃ©siliation anticipÃ©e. GelÃ©e : commission suspendue dans lâ€™attente dâ€™une rÃ©gularisation. 5. Statuts Documentaires Obligatoire : document requis (DIPA, CG, CP). Optionnel : document complÃ©mentaire (notice, script, mÃ©dia). ExpirÃ© : document dont la date de validitÃ© est dÃ©passÃ©e. ArchivÃ© : document conservÃ© pour historique. PubliÃ© : document en vigueur et associÃ© Ã la version active du produit. 6. Statuts Comptables Ã€ valider : mapping comptable incomplet ou en attente de validation compta. ValidÃ© : mapping comptable validÃ© et exportable. Erreur : incohÃ©rence dÃ©tectÃ©e (compte manquant, TVA non conforme). ExportÃ© : donnÃ©es transmises au cabinet comptable. 7. Statuts Webhooks &amp; Ã‰vÃ©nements partenaires ReÃ§u : Ã©vÃ©nement reÃ§u mais non traitÃ©. TraitÃ© : Ã©vÃ©nement correctement appliquÃ©. Ã‰chec : erreur de traitement ( retry possible). IgnorÃ© : Ã©vÃ©nement non pertinent (filtrÃ© par rÃ¨gles). Annexe D â€” Matrice RACI Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest 1. Principes La matrice RACI ( Responsible , Accountable , Consulted , Informed ) dÃ©finit les rÃ´les et responsabilitÃ©s de chaque acteur dans la gestion du catalogue produits et partenaires. R ( Responsible ) : rÃ©alise lâ€™action. A ( Accountable ) : valide, est redevable du rÃ©sultat. C ( Consulted ) : est consultÃ© pour avis/compÃ©tence. I ( Informed ) : est tenu informÃ©. 2. RÃ´les acteurs Produit : Chef de produit / Responsable offres. Compta : Responsable comptable / Cabinet externe. ADV : Administration des ventes / ContrÃ´le QualitÃ©. IT : Responsable technique / DÃ©veloppeurs. Marketing : Responsable communication / CRM marketing. 3. Processus clÃ©s &amp; RACI 3.1 CrÃ©ation dâ€™un nouveau produit TÃ¢che Produit Compta ADV IT Marketing DÃ©finition besoins &amp; business case R/A C C C C CrÃ©ation fiche produit (CRM) R I C C I DÃ©finition modÃ¨le tarifaire &amp; formules R C C I I ParamÃ©trage commissions R C I I I Validation documentaire (CG/DIPA) C I R/A I I Mapping comptable (comptes, TVA) C R/A I I I DÃ©ploiement API partenaire C I I R/A I Publication catalogue R C A I I 3.2 Mise Ã jour commission / tarif TÃ¢che Produit Compta ADV IT Marketing Proposition ajustement R C C I C Validation impact financier C R/A I I I ImplÃ©mentation dans CRM R C I R I Communication interne I I I I R/A 3.3 Validation documentaire TÃ¢che Produit Compta ADV IT Marketing RÃ©daction/collecte documents R I C I C VÃ©rification lÃ©gale / conformitÃ© C I R/A I I Archivage &amp; publication I I R I I 3.4 IntÃ©gration partenaire (ex: OggoData ) TÃ¢che Produit Compta ADV IT Marketing Contractualisation &amp; SLA R/A C C I I Onboarding credentials API I I I R/A I Test sandbox / recette C I C R I Mise en production I I I R/A I 3.5 Retrait produit TÃ¢che Produit Compta ADV IT Marketing DÃ©cision retrait R/A C C I C Blocage nouvelles ventes R I A I I Information clients I I R I A Archivage produit &amp; documents I C R I I 4. Gouvernance La responsabilitÃ© finale (A) du cycle de vie produit est portÃ©e par le Chef de produit . La validation comptable (A) est assurÃ©e par le Responsable comptable . Lâ€™ ADV est accountable (A) pour la validation documentaire et le contrÃ´le qualitÃ©. IT est accountable (A) pour lâ€™intÃ©gration technique et la sÃ©curitÃ©. Marketing est accountable (A) pour la communication interne/externe liÃ©e au catalogue. Annexe E â€” SpÃ©cification UX des Ã©crans clÃ©s Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest 1. Principes UX Interface simple, claire et modulaire , adaptÃ©e aux diffÃ©rents profils (ADV, Compta, Commercial, Produit, IT). AccÃ¨s rapide aux informations essentielles (produits, tarifs, commissions, documents). Navigation multi-pans (vue hiÃ©rarchique : Risques â†’ Partenaires â†’ Produits â†’ Versions/Formules). CohÃ©rence graphique avec lâ€™identitÃ© Winvest (charte multi-sociÃ©tÃ©s). 2. Ã‰crans principaux 2.1 Vue Catalogue (3 pans) Colonne 1 : Familles/Risques Liste avec icÃ´ne + libellÃ©. Filtre par sociÃ©tÃ©. Colonne 2 : Compagnies/Partenaires Liste avec statut (intÃ©grÃ© API, import, inactif). Recherche full- text . Colonne 3 : Produits Tableau listant : code produit, nom marketing, sociÃ©tÃ©, statut (brouillon/actif/etc.), partenaire associÃ©. Filtres par statut, sociÃ©tÃ©, canal, risque. Boutons actions rapides : CrÃ©er produit , Dupliquer , Exporter . 2.2 Fiche Produit 360Â° Header : Nom marketing, Code produit, SociÃ©tÃ©, Partenaire, Statut, DerniÃ¨re mise Ã jour. Onglets : Description : infos gÃ©nÃ©rales, risques, canaux, zones gÃ©o. Tarification : formules, plans tarifaires, rÃ¨gles dâ€™indexation. Commissions : schÃ©ma, paliers, rÃ©partition. Documents : liste (DIPA, CG, CPâ€¦), Ã©tat (obligatoire/optionnel, expirÃ©/publiÃ©). IntÃ©grations : mapping API/partenaire, logs de test. Historique : versions, changements, audit trail. Actions rapides : Dupliquer produit, CrÃ©er nouvelle version, Publier. 2.3 Wizard CrÃ©ation Produit Ã‰tapes : GÃ©nÃ©ral : nom, code, sociÃ©tÃ©, risque, type monÃ©tisation. Tarification : modÃ¨le tarifaire, formules, grilles. Commissions : schÃ©ma, rÃ©partition, paliers. Documents : tÃ©lÃ©chargement CG/DIPA, script vente. Publication : sociÃ©tÃ©, canaux, mapping compta, validation. Barre de progression, validations bloquantes si Ã©tapes incomplÃ¨tes. 2.4 Simulateur Commissions EntrÃ©es : sociÃ©tÃ©, produit, volume ventes, montant CA. Sorties : commission calculÃ©e par palier, rÃ©partition (commercial, manager, entreprise). Graphiques : barres cumulÃ©es (volume/commission). 2.5 Ã‰cran Documents Tableau : type document, version, date validitÃ©, canal applicable. Statut couleur : Vert : PubliÃ© Orange : Expirant bientÃ´t Rouge : Manquant/Obligatoire Actions : Upload, Remplacer, Archiver. 2.6 IntÃ©grations API Fiche partenaire : credentials ( sandbox /prod), statut, SLA. Console de test : envoyer une requÃªte de tarification/souscription. Logs affichÃ©s : requÃªte JSON, rÃ©ponse, statut (succÃ¨s/erreur). 3. UX transverses BanniÃ¨res dâ€™alerte doublons : dÃ©tection code produit/partenaire dÃ©jÃ existant. Badges produits : Nouveau, Promo, Sur devis, Beta. Notifications : rappel documents manquants, erreurs dâ€™intÃ©gration API. AccessibilitÃ© : responsive, contraste, raccourcis clavier. 4. Wireframes (Ã produire) Vue 3 pans catalogue. Fiche Produit 360Â° avec onglets. Wizard multi-Ã©tapes ( progress bar). Simulateur commissions (saisie â†’ rÃ©sultat graphique). Tableau documents avec statuts couleurs. Annexe F â€” Mappings dâ€™export comptable (CSV/Excel par sociÃ©tÃ©) Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest 1. Objectif Normaliser les exports comptables gÃ©nÃ©rÃ©s par le CRM pour chaque sociÃ©tÃ© du groupe Winvest. Assurer la compatibilitÃ© avec le cabinet comptable et les logiciels de gestion (Sage, Cegid, Excel). SÃ©parer les flux CA , commissions , frais , taxes . Garantir la traÃ§abilitÃ© produit â†” sociÃ©tÃ© â†” Ã©critures. 2. Structure gÃ©nÃ©rale des exports Format : CSV (sÃ©parateur ; ) + option Excel XLSX . Un fichier par sociÃ©tÃ© et par pÃ©riode (mois/annÃ©e). Nom fichier : EXPORT_{Societe}_{AAAA-MM}.csv Encodage : UTF-8 BOM. 3. Colonnes standardisÃ©es Colonne Type Description Date opÃ©ration Date Date de lâ€™Ã©criture comptable SociÃ©tÃ© Texte Nom de la sociÃ©tÃ© (FT, AP, MTV, USGPâ€¦) Produit Texte Code produit (SKU) Partenaire Texte Nom partenaire si applicable Type Ã©criture Enum CA / Commission / Frais / TVA Compte comptable Texte Compte gÃ©nÃ©ral (701xx, 709xx, 756xx, 628xxâ€¦) Journal Texte Code journal (VENTE, ACHAT, BANQUE) Centre de coÃ»ts Texte RÃ©fÃ©rence analytique si applicable DÃ©bit Decimal Montant au dÃ©bit CrÃ©dit Decimal Montant au crÃ©dit TVA Decimal Montant TVA appliquÃ©e Taux TVA % Taux TVA appliquÃ© (20%, 10%, 5,5%) RÃ©fÃ©rence contrat UUID Identifiant du contrat liÃ© RÃ©fÃ©rence client UUID Identifiant client liÃ© 4. Mapping par type de flux 4.1 Produits internes (CA) Compte : 701xxx (Ventes) ou 706xxx (Prestations de services). TVA : appliquÃ©e selon produit (20% par dÃ©faut, 5,5% Ã©nergie). Exemple : Date;Societe;Produit;Type;Compte;Debit;Credit;TVA;TauxTVA 2025-09-01;France TÃ©lÃ©phone;FT-BOX-001;CA;706100;0;29,90;4,98;20% 4.2 Produits partenaires (Commissions) Compte : 709xxx (Rabais/ristournes) ou 756xxx (Produits financiers selon nature). Pas de TVA (commission nette). Exemple : 2025-09-01;Action PrÃ©voyance;AP-SANTE-001;Commission;756200;0;120,00;0;0% 4.3 Frais (Frais bancaires, PSP) Compte : 627xxx (services bancaires). TVA : selon fournisseur. Exemple : 2025-09-01;Winvest Capital;PSP-Slimpay;Frais;627100;15,00;0;3,00;20% 4.4 TVA collectÃ©e / dÃ©ductible Export sÃ©parÃ© avec ventilation par taux. Compte : 4457xx (collectÃ©e), 4456xx (dÃ©ductible). 5. Cas spÃ©cifiques Produits mixtes (CA + commission) : double Ã©criture. Clawback : Ã©criture nÃ©gative sur compte commission. Primes/Malus commerciaux : compte dÃ©diÃ© 641xxx (charges personnel). Avoirs/annulations : Ã©critures inversÃ©es (dÃ©bit â†” crÃ©dit). 6. Automatisation exports GÃ©nÃ©ration mensuelle automatique (J+2 aprÃ¨s fin de mois). Stockage dans SharePoint/S3 + envoi au cabinet comptable . Option dÃ©clenchement manuel par compta (filtre pÃ©riode, sociÃ©tÃ©). Journalisation des exports (date, utilisateur, fichier gÃ©nÃ©rÃ©, hash). 7. Exemple Excel (Action PrÃ©voyance, septembre 2025) Date SociÃ©tÃ© Produit Partenaire Type Compte DÃ©bit CrÃ©dit TVA Taux 01/09/2025 AP AP-SANTE-001 Oggodata Commission 756200 0 120,00 0 0% 02/09/2025 AP AP-SANTE-002 Oggodata Commission 756200 0 98,00 0 0% 05/09/2025 AP AP-SANTE-003 Oggodata Commission 756200 0 145,00 0 0% Annexe G â€” Plan de sÃ©curitÃ© &amp; audit Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest 1. Objectifs Garantir la confidentialitÃ©, intÃ©gritÃ© et disponibilitÃ© des donnÃ©es produits/partenaires. Assurer la traÃ§abilitÃ© complÃ¨te des actions effectuÃ©es sur le catalogue. DÃ©finir les procÃ©dures de contrÃ´le interne et dâ€™ audit externe . 2. SÃ©curitÃ© applicative Authentification forte : MFA obligatoire ( authenticator , SMS, clÃ© physique) pour les profils sensibles (Admin, IT, Compta). SSO possible via Azure AD (Office 365). Gestion des rÃ´les : RBAC ( Role-Based Access Control) avec pÃ©rimÃ¨tre par sociÃ©tÃ©. SÃ©paration des environnements : DEV, TEST, PROD avec credentials distincts. Chiffrement : DonnÃ©es en transit via TLS 1.3. DonnÃ©es au repos chiffrÃ©es AES-256 (bases, fichiers). Credentials API partenaires stockÃ©s chiffrÃ©s (KMS/ Hashicorp Vault). Rotation secrets : clÃ©s API et credentials tournÃ©s tous les 90 jours. 3. TraÃ§abilitÃ© &amp; audit AuditLog central : Capture des actions CRUD sur les tables sensibles (produit, version, commission, documents, publication). DonnÃ©es stockÃ©es : utilisateur, rÃ´le, date, action, avant/aprÃ¨s. Conservation : 10 ans. Journal API : Logs des appels entrants/sortants (partenaires type OggoData ). Conservation : 24 mois. Webhook Event Log : Trace des Ã©vÃ©nements reÃ§us ( quote , issuePolicy , cancel, renewal , commissionReport ). Statuts : reÃ§u, traitÃ©, Ã©chec, ignorÃ©. 4. ProcÃ©dures de contrÃ´le interne Revue hebdomadaire : logs API, erreurs dâ€™intÃ©gration, tentatives dâ€™accÃ¨s non autorisÃ©es. Revue mensuelle : exports des journaux dâ€™audit pour contrÃ´le par DSI/Compta. ContrÃ´le annuel : audit interne (sÃ©curitÃ©, conformitÃ© RGPD, respect des procÃ©dures). Revue accÃ¨s utilisateurs : VÃ©rification trimestrielle des comptes actifs. DÃ©sactivation automatique aprÃ¨s 90 jours dâ€™inactivitÃ©. 5. ProcÃ©dures dâ€™audit externe Audit lÃ©gal : certification annuelle par commissaire aux comptes. Audit RGPD : vÃ©rification par DPO (DÃ©lÃ©guÃ© Ã la Protection des DonnÃ©es). Tests dâ€™intrusion : 1 fois/an par prestataire externe. Audit partenaires : revue des connecteurs API ( OggoData , PSP, etc.). 6. Notifications &amp; alertes Alertes temps rÃ©el (Slack/Email) : Tentative de connexion Ã©chouÃ©e (brute force). ClÃ© API invalide ou expirÃ©e. Webhook en Ã©chec rÃ©pÃ©tÃ©. Dashboard sÃ©curitÃ© : taux dâ€™Ã©checs, nombre de rotations clÃ©s, utilisateurs inactifs. 7. ContinuitÃ© documentaire Archivage des logs sous format WORM (Write Once Read Many). Sauvegarde quotidienne (S3/Glacier) avec RPO â‰¤ 1h. ConformitÃ© ISO 27001 &amp; RGPD. Annexe H â€” Plan de tests &amp; monitoring Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest 1. Objectifs Garantir la qualitÃ© fonctionnelle et technique du module Catalogue. DÃ©finir une stratÃ©gie de tests unitaires, intÃ©gration, charge et sÃ©curitÃ© . Mettre en place un monitoring continu sur les intÃ©grations partenaires (API, webhooks ). 2. StratÃ©gie de tests 2.1 Tests unitaires Couverture &gt; 80% sur : CRUD Produits, Formules, Commissions. Validations (unicitÃ© SKU, dates effet, TVA, documents obligatoires). API internes (simulateur commission, export comptable). 2.2 Tests dâ€™intÃ©gration Connexion API partenaires (ex : OggoData ) en sandbox . VÃ©rification du cycle complet : quote â†’ issuePolicy â†’ cancel â†’ commissionReport . VÃ©rification mapping comptable export. Test uploads documents (hash, version, archivage ). 2.3 Tests end to end (E2E) ScÃ©nario Â« CrÃ©ation produit complet Â» ( Wizard â†’ publication â†’ vente test). ScÃ©nario Â« Mise Ã jour commission Â» (version + publication planifiÃ©e). ScÃ©nario Â« Retrait produit Â» (gel + notification commerciale). 2.4 Tests de charge &amp; volumÃ©trie Objectif : 50 000 produits et 500 000 versions supportÃ©es. Simulation de 10 000 requÃªtes API quote /minute (stress test). Webhooks en rafale : 5 000 Ã©vÃ©nements reÃ§us simultanÃ©ment. 2.5 Tests sÃ©curitÃ© Injection SQL, XSS, CSRF sur formulaires catalogue. Tests bruteforce sur endpoints sensibles. VÃ©rification isolation multi-sociÃ©tÃ©s. 3. Monitoring en production 3.1 Catalogue interne Dashboard : nb produits actifs, statuts (actif/gelÃ©/retirÃ©), couverture documentaire. Alertes si documents expirÃ©s ou produits sans mapping comptable. 3.2 IntÃ©grations API Logs API : latence, taux succÃ¨s/Ã©chec, erreurs frÃ©quentes. Retry automatique : back-off exponentiel sur erreurs temporaires. Alertes : Slack/Email si taux dâ€™Ã©chec &gt; 5% ou latence &gt; 2s. 3.3 Webhooks Monitoring rÃ©ception Ã©vÃ©nements ( quote , issue, cancel, renewal ). Compteurs : reÃ§us, traitÃ©s, Ã©chouÃ©s. Alertes en cas dâ€™Ã©chec rÃ©pÃ©tÃ© &gt; 3. 3.4 Infrastructure Supervision via Prometheus / Grafana : CPU, RAM, DB, latence requÃªtes. Alertes PagerDuty sur incidents critiques. Backups surveillÃ©s (succÃ¨s/Ã©chec, RPO/RTO respectÃ©s). 4. Organisation &amp; responsabilitÃ©s IT : exÃ©cution tests automatiques + monitoring technique. Produit : validation fonctionnelle. ADV : vÃ©rification documentaire (checklist produit). Compta : validation exports comptables. 5. Livrables tests Cahier de tests unitaires (scripts automatisÃ©s Jest / PyTest ). Jeux de donnÃ©es mock (produits, commissions, API sandbox ). Rapport de couverture tests. ScÃ©narios E2E automatisÃ©s ( Cypress / Playwright ). Annexe I â€” PRA/PCA &amp; continuitÃ© Module : Catalogue Produits &amp; Partenaires â€” CRM Winvest 1. Objectifs DÃ©finir les mesures garantissant la continuitÃ© de service du module Catalogue Produits &amp; Partenaires. Assurer la rÃ©silience face aux pannes matÃ©rielles, logicielles ou cyberattaques. Fixer les cibles de reprise : RPO â‰¤ 1h (perte de donnÃ©es max), RTO â‰¤ 4h (dÃ©lai de remise en service max). 2. Architecture de continuitÃ© Redondance multi zones : hÃ©bergement sur plusieurs data centers (AWS eu- west + eu-central). RÃ©partition de charge : load balancer actif/actif. Base de donnÃ©es : cluster rÃ©pliquÃ© synchrone (multi AZ) + rÃ©plication asynchrone vers site secondaire. Stockage fichiers (documents produits) : S3 avec rÃ©plication cross- region + Glacier pour archivage long terme. Services API partenaires : fallback mode (si API externe KO, bascule vers saisie manuelle ou cache tarifaire). 3. Sauvegardes &amp; restauration Sauvegarde DB : snapshots horaires, conservation 7j ; sauvegarde quotidienne, conservation 30j ; mensuelle, conservation 1 an. Sauvegarde documents : rÃ©plication S3 + versioning activÃ©. Test restauration : exercices trimestriels de restauration complÃ¨te. Validation PRA : audit annuel du processus de restauration. 4. ProcÃ©dures PRA (Plan de Reprise dâ€™ActivitÃ©) Incident critique dÃ©tectÃ© (panne infra, corruption DB, cyberattaque). Ã‰tapes : DÃ©clenchement alerte (automatique + notification DSI). Bascule vers site secondaire (DB rÃ©pliquÃ©e, fichiers rÃ©pliquÃ©s). RecrÃ©ation des services applicatifs (containers dÃ©ployÃ©s via script IaC ). Tests validation applicative (login, lecture produits, export compta). Reprise progressive du trafic utilisateurs. RTO cible : 4h . 5. ProcÃ©dures PCA (Plan de ContinuitÃ© dâ€™ActivitÃ©) Objectif : maintenir service mÃªme en cas de panne partielle. Catalogue : mode lecture seule activÃ© si panne DB Ã©criture. API partenaires : bascule sur mock cache si indisponibles &gt; 15min. Exports comptables : gÃ©nÃ©ration diffÃ©rÃ©e si cluster compta indisponible. 6. ScÃ©narios de risque couverts Panne matÃ©rielle : redondance multi zones . Cyberattaque (ransomware/DDOS) : WAF + anti-DDOS Cloudflare . Snapshots isolÃ©s (air gapped ) pour restauration. Erreur humaine : audit trail complet + rollback version produit. Perte partenaire : reroutage flux API â†’ backup manuel CSV. 7. Communication &amp; gouvernance ComitÃ© PRA/PCA : DSI (pilotage), Produit, Compta, ADV. Escalade incidents : SLA internes (alerte &lt; 15min, diagnostic &lt; 1h, dÃ©cision bascule &lt; 2h). Communication interne : Slack/Email vers Ã©quipes ; communication client si impact visible. 8. Tests &amp; amÃ©lioration continue Exercices PRA 2 fois/an (simulation panne totale). Exercices PCA trimestriels (simulation API partenaire KO). Rapports post mortem systÃ©matiques. Mise Ã jour annuelle du plan PRA/PCA. 
