// Code generated by protoc-gen-ts_proto. DO NOT EDIT.
// versions:
//   protoc-gen-ts_proto  v1.181.2
//   protoc               unknown
// source: retry/am04_retry_service.proto

/* eslint-disable */
import type {
  RejectionReasonCode,
  Reminder,
  ReminderChannel,
  ReminderPolicy,
  ReminderStatus,
  ReminderTriggerRule,
  RetryAttempt,
  RetryAuditLog,
  RetryEligibility,
  RetryJob,
  RetryJobStatus,
  RetryPolicy,
  RetrySchedule,
} from "./am04_retry";

export interface DeleteResponse {
  success: boolean;
  message: string;
}

export interface PaginationRequest {
  page: number;
  limit: number;
  sortBy: string;
  sortOrder: string;
}

export interface PaginationResponse {
  total: number;
  page: number;
  limit: number;
  totalPages: number;
}

export interface GetRetryPolicyRequest {
  id: string;
}

export interface RetryPolicyResponse {
  policy?: RetryPolicy | undefined;
}

export interface ListRetryPoliciesRequest {
  organisationId: string;
  societeId?: string | undefined;
  activeOnly?: boolean | undefined;
  pagination?: PaginationRequest | undefined;
}

export interface ListRetryPoliciesResponse {
  policies: RetryPolicy[];
  pagination?: PaginationResponse | undefined;
}

export interface CreateRetryPolicyRequest {
  organisationId: string;
  societeId?: string | undefined;
  productId?: string | undefined;
  channelId?: string | undefined;
  name: string;
  description: string;
  retryDelaysDays: number[];
  maxAttempts: number;
  maxTotalDays: number;
  retryOnAm04: boolean;
  retryableCodes: RejectionReasonCode[];
  nonRetryableCodes: RejectionReasonCode[];
  stopOnPaymentSettled: boolean;
  stopOnContractCancelled: boolean;
  stopOnMandateRevoked: boolean;
  backoffStrategy: string;
  isDefault: boolean;
  priority: number;
}

export interface UpdateRetryPolicyRequest {
  id: string;
  name?: string | undefined;
  description?: string | undefined;
  retryDelaysDays: number[];
  maxAttempts?: number | undefined;
  maxTotalDays?: number | undefined;
  retryOnAm04?: boolean | undefined;
  retryableCodes: RejectionReasonCode[];
  nonRetryableCodes: RejectionReasonCode[];
  stopOnPaymentSettled?: boolean | undefined;
  stopOnContractCancelled?: boolean | undefined;
  stopOnMandateRevoked?: boolean | undefined;
  backoffStrategy?: string | undefined;
  isActive?: boolean | undefined;
  isDefault?: boolean | undefined;
  priority?: number | undefined;
}

export interface DeleteRetryPolicyRequest {
  id: string;
}

export interface GetRetryScheduleRequest {
  id: string;
}

export interface RetryScheduleResponse {
  schedule?: RetrySchedule | undefined;
  attempts: RetryAttempt[];
  reminders: Reminder[];
}

export interface ListRetrySchedulesRequest {
  organisationId: string;
  societeId?: string | undefined;
  clientId?: string | undefined;
  contratId?: string | undefined;
  eligibility?: RetryEligibility | undefined;
  isResolved?: boolean | undefined;
  fromDate?: Date | undefined;
  toDate?: Date | undefined;
  pagination?: PaginationRequest | undefined;
}

export interface ListRetrySchedulesResponse {
  schedules: RetrySchedule[];
  pagination?: PaginationResponse | undefined;
}

export interface CancelRetryScheduleRequest {
  id: string;
  reason: string;
  cancelledBy: string;
}

export interface ReplanRetryScheduleRequest {
  id: string;
  newRetryDate?: Date | undefined;
  reason: string;
  replannedBy: string;
}

export interface GetRetryAttemptRequest {
  id: string;
}

export interface RetryAttemptResponse {
  attempt?: RetryAttempt | undefined;
}

export interface ListRetryAttemptsRequest {
  retryScheduleId: string;
  pagination?: PaginationRequest | undefined;
}

export interface ListRetryAttemptsResponse {
  attempts: RetryAttempt[];
  pagination?: PaginationResponse | undefined;
}

export interface RunNowRequest {
  organisationId: string;
  retryScheduleId?: string | undefined;
  triggeredBy: string;
  dryRun: boolean;
}

export interface RunNowResponse {
  jobId: string;
  status: RetryJobStatus;
  message: string;
  scheduledCount: number;
}

export interface GetRetryJobStatusRequest {
  jobId: string;
}

export interface RetryJobResponse {
  job?: RetryJob | undefined;
}

export interface ListRetryJobsRequest {
  organisationId: string;
  status?: RetryJobStatus | undefined;
  fromDate?: Date | undefined;
  toDate?: Date | undefined;
  pagination?: PaginationRequest | undefined;
}

export interface ListRetryJobsResponse {
  jobs: RetryJob[];
  pagination?: PaginationResponse | undefined;
}

export interface GetRetryMetricsRequest {
  organisationId: string;
  societeId?: string | undefined;
  fromDate?: Date | undefined;
  toDate?: Date | undefined;
}

export interface RetryMetricsResponse {
  totalRejections: number;
  am04Rejections: number;
  otherRejections: number;
  totalRetrySchedules: number;
  eligibleForRetry: number;
  notEligible: number;
  totalRetryAttempts: number;
  successfulRetries: number;
  failedRetries: number;
  pendingRetries: number;
  successRate: number;
  am04Rate: number;
  totalAmountRecoveredCents: number;
  totalAmountPendingCents: number;
  rejectionCodeBreakdown: RejectionCodeMetric[];
  dailyMetrics: DailyRetryMetric[];
}

export interface RejectionCodeMetric {
  code: RejectionReasonCode;
  codeRaw: string;
  count: number;
  percentage: number;
}

export interface DailyRetryMetric {
  date: string;
  rejections: number;
  retriesScheduled: number;
  retriesExecuted: number;
  retriesSucceeded: number;
  retriesFailed: number;
}

export interface GetAuditLogsRequest {
  organisationId: string;
  entityType?: string | undefined;
  entityId?: string | undefined;
  action?: string | undefined;
  fromDate?: Date | undefined;
  toDate?: Date | undefined;
  pagination?: PaginationRequest | undefined;
}

export interface AuditLogsResponse {
  logs: RetryAuditLog[];
  pagination?: PaginationResponse | undefined;
}

export interface ProcessDueRetriesRequest {
  organisationId: string;
  targetDate?: Date | undefined;
  timezone: string;
  cutoffTime: string;
  dryRun: boolean;
}

export interface ProcessDueRetriesResponse {
  jobId: string;
  status: RetryJobStatus;
  totalProcessed: number;
  successful: number;
  failed: number;
  skipped: number;
  results: ProcessedRetryResult[];
}

export interface ProcessedRetryResult {
  retryScheduleId: string;
  retryAttemptId: string;
  success: boolean;
  errorCode?: string | undefined;
  errorMessage?: string | undefined;
}

export interface CheckEligibilityRequest {
  paymentId: string;
  rejectionCode: string;
  organisationId: string;
  societeId?: string | undefined;
  contratId?: string | undefined;
  clientId?: string | undefined;
}

export interface CheckEligibilityResponse {
  eligibility: RetryEligibility;
  reason: string;
  applicablePolicyId?: string | undefined;
  firstRetryDate?: Date | undefined;
}

export interface HandleRejectionResponse {
  processed: boolean;
  retryScheduleId?: string | undefined;
  eligibility: RetryEligibility;
  message: string;
  reminderIds: string[];
}

export interface GetReminderPolicyRequest {
  id: string;
}

export interface ReminderPolicyResponse {
  policy?: ReminderPolicy | undefined;
}

export interface ListReminderPoliciesRequest {
  organisationId: string;
  societeId?: string | undefined;
  activeOnly?: boolean | undefined;
  pagination?: PaginationRequest | undefined;
}

export interface ListReminderPoliciesResponse {
  policies: ReminderPolicy[];
  pagination?: PaginationResponse | undefined;
}

export interface CreateReminderPolicyRequest {
  organisationId: string;
  societeId?: string | undefined;
  name: string;
  description: string;
  triggerRules: ReminderTriggerRule[];
  cooldownHours: number;
  maxRemindersPerDay: number;
  maxRemindersPerWeek: number;
  allowedStartHour: number;
  allowedEndHour: number;
  allowedDaysOfWeek: number[];
  respectOptOut: boolean;
  isDefault: boolean;
  priority: number;
}

export interface UpdateReminderPolicyRequest {
  id: string;
  name?: string | undefined;
  description?: string | undefined;
  triggerRules: ReminderTriggerRule[];
  cooldownHours?: number | undefined;
  maxRemindersPerDay?: number | undefined;
  maxRemindersPerWeek?: number | undefined;
  allowedStartHour?: number | undefined;
  allowedEndHour?: number | undefined;
  allowedDaysOfWeek: number[];
  respectOptOut?: boolean | undefined;
  isActive?: boolean | undefined;
  isDefault?: boolean | undefined;
  priority?: number | undefined;
}

export interface DeleteReminderPolicyRequest {
  id: string;
}

export interface GetReminderRequest {
  id: string;
}

export interface ReminderResponse {
  reminder?: Reminder | undefined;
}

export interface ListRemindersRequest {
  organisationId: string;
  retryScheduleId?: string | undefined;
  clientId?: string | undefined;
  channel?: ReminderChannel | undefined;
  status?: ReminderStatus | undefined;
  fromDate?: Date | undefined;
  toDate?: Date | undefined;
  pagination?: PaginationRequest | undefined;
}

export interface ListRemindersResponse {
  reminders: Reminder[];
  pagination?: PaginationResponse | undefined;
}

export interface CancelReminderRequest {
  id: string;
  reason: string;
  cancelledBy: string;
}

export interface SendReminderRequest {
  id: string;
  force: boolean;
}

export interface SendReminderResponse {
  success: boolean;
  message: string;
  providerMessageId?: string | undefined;
  errorCode?: string | undefined;
}

export interface ProcessDueRemindersRequest {
  organisationId: string;
  targetTime?: Date | undefined;
  timezone: string;
  dryRun: boolean;
}

export interface ProcessDueRemindersResponse {
  totalProcessed: number;
  sent: number;
  failed: number;
  skipped: number;
  results: ProcessedReminderResult[];
}

export interface ProcessedReminderResult {
  reminderId: string;
  success: boolean;
  channel: ReminderChannel;
  providerMessageId?: string | undefined;
  errorCode?: string | undefined;
  errorMessage?: string | undefined;
  skipReason?: string | undefined;
}

export interface UpdateDeliveryStatusRequest {
  reminderId: string;
  status: ReminderStatus;
  providerMessageId?: string | undefined;
  deliveryStatusRaw?: string | undefined;
  errorCode?: string | undefined;
  errorMessage?: string | undefined;
}
